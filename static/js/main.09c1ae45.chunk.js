(this.webpackJsonpmailing_app=this.webpackJsonpmailing_app||[]).push([[0],Array(23).concat([function(e,a,t){},,function(e,a,t){e.exports=t.p+"static/media/avatar1.7d0f3836.png"},,,,,,,,,,,,,,,,,,,function(e,a,t){},,,,,,,,,,,,,,,,function(e,a,t){e.exports=t.p+"static/media/bgc-image1.f139e585.jpg"},function(e,a,t){e.exports=t.p+"static/media/avatar2.b9546314.png"},function(e,a,t){e.exports=t.p+"static/media/avatar3.5a4e7d16.png"},function(e,a,t){e.exports=t.p+"static/media/avatar4.224f59a4.png"},function(e,a,t){e.exports=t.p+"static/media/avatar5.8e318d8a.png"},function(e,a,t){e.exports=t.p+"static/media/avatar6.11b3efc7.png"},,,,,function(e,a,t){e.exports=t(168)},,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},,,,,,,,,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,t){},,,,,,,,,,,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},,function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(19),c=t.n(s),l=(t(75),t(3)),i=t(4),o=t(6),d=t(5),m=(t(76),t(7)),u=(t(77),[{name:"Email",path:"/email/",icon:"far fa-envelope-open"},{name:"Calendar",path:"/calendar/",icon:"far fa-calendar-alt"},{name:"Addressbook",path:"/addressbook/",icon:"far fa-address-book"},{name:"About",path:"/about/",icon:"fas fa-info"}]),h=function(){var e=u.map((function(e){return r.a.createElement("div",{key:e.name,className:"menu-item-container"},r.a.createElement(m.c,{to:e.path,exact:!!e.exact&&e.exact},r.a.createElement("li",{className:"menu-item",title:e.name},r.a.createElement("i",{className:e.icon}))))}));return r.a.createElement("nav",{className:"menu-container"},r.a.createElement("ul",{className:"menu"},e))},p=t(12),f=(t(82),function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=a.call.apply(a,[this].concat(s))).state={},e.data=[{id:1,message:"You have new mail",date:"today",icon:r.a.createElement("i",{className:"far fa-envelope-open"})},{id:2,message:"Check your tasks scheduled for today",date:"today",icon:r.a.createElement("i",{className:"far fa-calendar-alt"})},{id:3,message:"You have new mail",date:"yesterday",icon:r.a.createElement("i",{className:"far fa-envelope-open"})},{id:4,message:"Check your tasks scheduled for today",date:"2 days ago",icon:r.a.createElement("i",{className:"far fa-calendar-alt"})},{id:5,message:"Update your settings!",date:"1 week ago",icon:r.a.createElement("i",{className:"fas fa-cog"})},{id:6,message:"Update your settings!",date:"1 week ago",icon:r.a.createElement("i",{className:"fas fa-cog"})},{id:7,message:"You have new mail",date:"2 weeks ago",icon:r.a.createElement("i",{className:"far fa-envelope-open"})},{id:8,message:"You have new mail",date:"2 weeks ago",icon:r.a.createElement("i",{className:"far fa-envelope-open"})},{id:9,message:"You have new mail",date:"2 weeks ago",icon:r.a.createElement("i",{className:"far fa-envelope-open"})}],e.renderNotificationsContent=function(){return e.data.map((function(e){return r.a.createElement("div",{key:e.id,className:"notification-item"},r.a.createElement("p",{className:"notification-message"},e.message),r.a.createElement("p",{className:"notification-icon"},e.icon),r.a.createElement("p",{className:"notification-date"},e.date))}))},e}return Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"notifications-container"},r.a.createElement("div",{className:"notifications-header"},r.a.createElement("p",null,"Notifications:"),r.a.createElement("p",{className:"notifications-header-counter"},this.data.length)),r.a.createElement("div",{className:"notifications-content"},this.renderNotificationsContent()))}}]),t}(n.Component)),v=(t(83),t(60)),g=t.n(v),E=function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=a.call.apply(a,[this].concat(s))).state={},e.handleClick=function(a){e.props.handleBackgroundChange(a)},e.generateThemes=function(){return[{name:"Lightblue",style:{backgroundImage:"linear-gradient(120deg, #96adcb 50%, #c2e9fb 100%)"}},{name:"Salmon",style:{backgroundImage:"linear-gradient(142deg, rgb(227 160 154) 20%, rgb(255 253 233) 100%)"}},{name:"Cucumber water",style:{backgroundImage:"linear-gradient(90deg, rgb(187 206 239) 0%, rgb(216 241 219) 100%)"}},{name:"Colorful background",style:{backgroundImage:"url(".concat(g.a,")"),backgroundSize:"cover"}},{name:"Sunset",style:{backgroundImage:"linear-gradient(45deg, rgba(0, 40, 70, 0.85) -5%, rgba(255, 115, 115, 0.6) 80%, rgba(255, 175, 123, 0.4) 99%)"}}].map((function(a){return r.a.createElement("div",{key:a.name,className:"settings-content-theme",onClick:function(){return e.handleClick(a.style)}},r.a.createElement("div",{className:"settings-content-theme-color",style:a.style}),r.a.createElement("div",{className:"settings-content-theme-name"},a.name))}))},e}return Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"settings-container"},r.a.createElement("div",{className:"settings-header"},r.a.createElement("p",null,"Settings")),r.a.createElement("div",{className:"settings-content"},r.a.createElement("p",null,"Change theme:"),r.a.createElement("div",{className:"settings-content-themes-container"},this.generateThemes()))))}}]),t}(n.Component),b=(t(84),function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).state={},e}return Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"help-container"},r.a.createElement("div",{className:"help-header"},r.a.createElement("p",null,"What is this?")),r.a.createElement("div",{className:"help-content"},r.a.createElement("p",null,"This app was created as a training exercise to improve programming skills. It is a simplified version of a mailbox with calendar and addressbook features."),r.a.createElement("p",null,"To read more, visit  ",r.a.createElement(m.b,{to:"/about"},"About")," page.")))}}]),t}(n.Component)),k=(t(85),function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleMouseEnter=function(e){n.setState(Object(p.a)({},e,!0))},n.handleMouseLeave=function(e){setTimeout((function(){n.setState(Object(p.a)({},e,!1))}),200)},n.state={notificationsActive:!1,settingsActive:!1,helpActive:!1},n}return Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"notifications"},r.a.createElement("div",{className:"notifications-item",title:"Notifications",onMouseEnter:function(){return e.handleMouseEnter("notificationsActive")},onMouseLeave:function(){return e.handleMouseLeave("notificationsActive")}},r.a.createElement("i",{className:"fas fa-bell"}),r.a.createElement("div",{className:"notifications-item-counter"},"9"),this.state.notificationsActive?r.a.createElement(f,null):null),r.a.createElement("div",{className:"notifications-item",title:"Settings",onMouseEnter:function(){return e.handleMouseEnter("settingsActive")},onMouseLeave:function(){return e.handleMouseLeave("settingsActive")}},r.a.createElement("i",{className:"fas fa-cog"}),this.state.settingsActive?r.a.createElement(E,{handleBackgroundChange:this.props.handleBackgroundChange}):null),r.a.createElement("div",{className:"notifications-item",title:"Help",onMouseEnter:function(){return e.handleMouseEnter("helpActive")},onMouseLeave:function(){return e.handleMouseLeave("helpActive")}},r.a.createElement("i",{className:"fas fa-question-circle"}),this.state.helpActive?r.a.createElement(b,null):null))}}]),t}(n.Component)),C=t(25),y=t.n(C),N=t(61),S=t.n(N),w=t(62),F=t.n(w),j=t(63),D=t.n(j),O=t(64),T=t.n(O),x=t(65),A=t.n(x),M=(t(86),t(87),function(e){var a=e.type,t=e.buttonStyle,n=e.handleClick,s=e.text;return r.a.createElement("button",{type:a,className:"buttonComponent ".concat(t),onClick:n},s)}),I=function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=a.call.apply(a,[this].concat(s))).state={selectedPicture:{}},e.handleSelector=function(a,t){e.setState({selectedPicture:e.state.selectedPicture===t?null:t}),document.querySelectorAll(".picture-editor-selector-img").forEach((function(e){return e.classList.remove("active")})),a.target.classList.toggle("active")},e.generatePictureEditorSelectorOptions=function(){return[y.a,S.a,F.a,D.a,T.a,A.a].map((function(a){return r.a.createElement("img",{src:a,alt:"Avatar",key:a,className:"picture-editor-selector-img",onClick:function(t){return e.handleSelector(t,{backgroundImage:"url(".concat(a,")")})}})}))},e}return Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"picture-editor-page-container",onClick:function(){return e.props.handleClick("pictureEditorActive")}}),r.a.createElement("div",{className:"picture-editor-container"},r.a.createElement("p",{className:"picture-editor-title"},"Select profile picture:"),r.a.createElement("div",{className:"picture-editor-selector"},this.generatePictureEditorSelectorOptions()),r.a.createElement("div",{className:"picture-editor-buttons"},r.a.createElement(M,{type:"button",buttonStyle:"primary",handleClick:function(){return e.props.handlePictureChange(e.state.selectedPicture)},text:"Apply"}),r.a.createElement(M,{type:"button",buttonStyle:"secondary",handleClick:function(){return e.props.handleClick("pictureEditorActive")},text:"Cancel"}))))}}]),t}(n.Component),P=(t(88),function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(e){var n;Object(l.a)(this,t),(n=a.call(this,e)).handleClick=function(e){n.setState((function(a){return Object(p.a)({},e,!a[e])}))},n.handlePictureChange=function(e){n.setState({headerPicture:e}),localStorage.setItem("headerPicture",JSON.stringify(e)),n.setState({pictureEditorActive:!1})};var r=JSON.parse(localStorage.getItem("headerPicture"));return n.state={pictureEditorActive:!1,headerPicture:null!==r&&void 0!==r?r:{backgroundImage:"url(".concat(y.a,")")}},n}return Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header-container"},r.a.createElement("div",{className:"header-logo"},r.a.createElement("p",null,"Mailbox")),r.a.createElement("div",{className:"header-content"},r.a.createElement(k,{handleBackgroundChange:this.props.handleBackgroundChange}),r.a.createElement("div",{className:"header-picture",style:this.state.headerPicture,onClick:function(){return e.handleClick("pictureEditorActive")}}))),this.state.pictureEditorActive?r.a.createElement(I,{handleClick:this.handleClick,handlePictureChange:this.handlePictureChange}):null)}}]),t}(n.Component)),B=t(9),L=(t(44),[{name:"Inbox",path:"/email/inbox",icon:"far fa-envelope-open"},{name:"Sent",path:"/email/outbox",icon:"far fa-paper-plane"},{name:"Drafts",path:"/email/draft",icon:"fas fa-pencil-ruler"},{name:"Trash",path:"/email/trash",icon:"far fa-trash-alt"},{name:"Spam",path:"/email/spam",icon:"fas fa-ban"}]),U=function(){var e=L.map((function(e){return r.a.createElement("li",{key:e.name,className:"nav-item",title:e.name},r.a.createElement(m.c,{to:e.path,className:"nav-item-container"},r.a.createElement("i",{className:e.icon}),r.a.createElement("p",null,e.name)))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"nav-container"},r.a.createElement("ul",{className:"nav"},r.a.createElement("div",{className:"nav-item-btn"},r.a.createElement(m.c,{to:"/email/compose/new",exact:!0},r.a.createElement("i",{className:"fas fa-pencil-alt"}),r.a.createElement("p",null,"Compose"))),e)))},R=(t(89),function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=a.call.apply(a,[this].concat(s))).state={searchText:""},e.handleChange=function(a){e.setState({searchText:a.target.value})},e.handleKeyUp=function(a){13===a.keyCode&&e.props.handleSearch(a.target.value)},e.handleClick=function(){e.props.handleSearch(e.state.searchText)},e.handleClearInput=function(){e.setState({searchText:""}),e.props.handleSearch("")},e.clearInput=function(){if(""!==e.state.searchText)return r.a.createElement("i",{className:"fas fa-times",title:"Clear search",onClick:e.handleClearInput})},e}return Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"input-search-container"},r.a.createElement("input",{className:"input-search",type:"text",placeholder:"search...",value:this.state.searchText,onChange:function(a){return e.handleChange(a)},onKeyUp:function(a){return e.handleKeyUp(a)}}),this.clearInput(),r.a.createElement("i",{className:"fas fa-search",title:"Search",onClick:function(){return e.handleClick()}})))}}]),t}(n.Component)),H=(t(90),function(e){var a=0!==e.pagesCount?e.currentPage:0;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"pager-container"},r.a.createElement("p",{className:"pager-location"},"page ",a," of ",e.pagesCount),r.a.createElement("button",{className:"pager-btn",title:"Previous",onClick:function(){return e.handlePageChange(-1)}},r.a.createElement("i",{className:"fas fa-chevron-left"})),r.a.createElement("button",{className:"pager-btn",title:"Next",onClick:function(){return e.handlePageChange(1)}},r.a.createElement("i",{className:"fas fa-chevron-right"}))))}),V=(t(91),function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).state={newestFirst:!0},e.handleDateSorting=function(){e.setState((function(e){return{newestFirst:!e.newestFirst}})),e.props.handleDateSorting(!e.state.newestFirst)},e}return Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"date-sorting-container",title:this.state.newestFirst?"Newest first":"Oldest first",onClick:this.handleDateSorting},r.a.createElement("i",{className:this.state.newestFirst?"fas fa-sort-up date-sorting-up":"fas fa-sort-up date-sorting-down"})))}}]),t}(n.Component)),J=(t(92),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{className:"lds-css ng-scope"},r.a.createElement("div",{className:"lds-spinner",style:{width:"100%",height:"100%"}},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))))}),z=t(26),G=t.n(z),W=(t(104),"https://catmail.azurewebsites.net"),q=function(){function e(){Object(l.a)(this,e),this.controller=new AbortController}return Object(i.a)(e,[{key:"useFetch",value:function(e,a,t,n){a.signal=this.controller.signal,e=W+e,fetch(e,a).then((function(e){if(200===e.status)return e;if(400===e.status)throw e.text().then((function(e){return e?alert(e):"Request is not valid"})),Error(e);if(401===e.status)throw alert("Access to this feature is only for logged users, Unauthorized"),Error("Error");if(403===e.status)throw alert("Access to this feature has been forbidden, Forbidden"),Error("Error");if(404===e.status)throw alert("Network location doesn't exist, Page Not Found"),Error("Error");if(500===e.status)throw alert("Internal Server Error"),Error("Error")})).then((function(e){return e.text()})).then((function(e){return e.length>0?JSON.parse(e):null})).then((function(e){t(e)})).catch((function(e){console.log(e),n(e)}))}},{key:"abortFetch",value:function(){this.controller.abort(),console.log("Fetch aborted")}}]),e}(),K=t(10),Y=function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleMoveToFolder=function(e){var a="/api/Emails/".concat(n.props.data.id,"/move/").concat(e);n.fetchService.useFetch(a,{method:"put"},(function(){n.props.handleDeletingOrMovingEmail(),Object(K.c)("Email moved to ".concat(e))}),(function(e){console.log("Failed to move email. ",e),K.c.error("Failed to move email")}))},n.handleRestoreFromFolder=function(e){var a="/api/Emails/".concat(n.props.data.id,"/restore/").concat(e);n.fetchService.useFetch(a,{method:"put"},(function(){n.props.handleDeletingOrMovingEmail(),Object(K.c)("Email restored")}),(function(e){console.log("Failed to restore email. ",e),K.c.error("Failed to restore email")}))},n.deleteEmail=function(){var e="/api/Emails/".concat(n.props.data.id);n.fetchService.useFetch(e,{method:"delete"},(function(){n.props.handleDeletingOrMovingEmail(),Object(K.c)("Email deleted")}),(function(e){console.log("Failed to delete email. ",e),K.c.error("Failed to delete email")}))},n.fetchService=new q,n}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.props.data.id,t=this.props.currentFolder,n={reply:!!["inbox","outbox","trash","spam"].includes(t),replyAll:!!["inbox","outbox","trash","spam"].includes(t),forward:!!["inbox","outbox","trash","spam"].includes(t),edit:!!["draft"].includes(t),moveToSpam:!!["inbox"].includes(t),moveToTrash:!!["inbox","outbox","spam"].includes(t),restoreFromTrash:!!["trash"].includes(t),restoreFromSpam:!!["spam"].includes(t),deleteEmail:!!["draft","trash"].includes(t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"email-view-tools-container"},n.reply&&r.a.createElement(m.b,{to:"/email/compose/new?id=".concat(a,"&responsetype=reply")},r.a.createElement("div",{className:"email-view-tools",title:"Reply"},r.a.createElement("i",{className:"fas fa-reply"}))),n.replyAll&&r.a.createElement(m.b,{to:"/email/compose/new?id=".concat(a,"&responsetype=replyall")},r.a.createElement("div",{className:"email-view-tools",title:"Reply to all"},r.a.createElement("i",{className:"fas fa-reply-all"}))),n.forward&&r.a.createElement(m.b,{to:"/email/compose/new?id=".concat(a,"&responsetype=forward")},r.a.createElement("div",{className:"email-view-tools",title:"Forward"},r.a.createElement("i",{className:"fas fa-share"}))),n.edit&&r.a.createElement(m.b,{to:"/email/compose/new?id=".concat(a,"&responsetype=edit")},r.a.createElement("div",{className:"email-view-tools",title:"Edit"},r.a.createElement("i",{className:"far fa-edit"}))),n.moveToSpam&&r.a.createElement("div",{className:"email-view-tools",title:"Move to spam",onClick:function(){return e.handleMoveToFolder("spam")}},r.a.createElement("i",{className:"fas fa-ban"})),n.restoreFromTrash&&r.a.createElement("div",{className:"email-view-tools",title:"Restore to original folder",onClick:function(){return e.handleRestoreFromFolder("trash")}},r.a.createElement("i",{className:"fas fa-trash-restore"})),n.restoreFromSpam&&r.a.createElement("div",{className:"email-view-tools",title:"Restore to Inbox",onClick:function(){return e.handleRestoreFromFolder("spam")}},r.a.createElement("i",{className:"fas fa-trash-restore"})),n.moveToTrash&&r.a.createElement("div",{className:"email-view-tools",title:"Move to trash",onClick:function(){return e.handleMoveToFolder("trash")}},r.a.createElement("i",{className:"far fa-trash-alt"})),n.deleteEmail&&r.a.createElement("div",{className:"email-view-tools",title:"Delete",onClick:this.deleteEmail},r.a.createElement("i",{className:"far fa-times-circle"}))))}}]),t}(n.Component),Z=(t(105),function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).renderSpinner=function(){n.setState({showSpinner:!0})},n.handlePageChange=function(e){var a=n.state,t=a.take,r=a.currentPage,s=a.pagesCount,c=a.searchText,l=a.newestFirst;if(r+e>=1&&r+e<=s){var i=r+e,o=(i-1)*t;n.setState({currentPage:i,skip:o});var d=n.props.match.params.folder;n.fetchData(d,o,t,c,l)}},n.handleSearch=function(e){n.setState({searchText:e});var a=n.props.match.params.folder,t=n.state,r=t.skip,s=t.take,c=t.newestFirst;n.fetchData(a,r,s,e,c)},n.handleDateSorting=function(e){n.setState({newestFirst:e});var a=n.props.match.params.folder,t=n.state,r=t.skip,s=t.take,c=t.searchText;n.fetchData(a,r,s,c,e)},n.handleDeletingOrMovingEmail=function(){1===n.state.data.items.length&&n.state.pagesCount>1&&n.setState((function(e){return{currentPage:e.currentPage-1}}));var e=n.props.match.params.folder,a=n.state,t=a.currentPage,r=a.take,s=a.searchText,c=a.newestFirst,l=(t-1)*r;n.fetchData(e,l,r,s,c)},n.state={data:null,skip:0,take:20,currentPage:1,pagesCount:null,searchText:"",newestFirst:!0,showSpinner:!0},n.fetchService=new q,n}return Object(i.a)(t,[{key:"fetchData",value:function(e,a,t,n,r){var s=this;this.renderSpinner();var c="/api/folders/".concat(e,"/emails?skip=").concat(a,"&take=").concat(t,"&searchText=").concat(n,"&newestFirst=").concat(r);this.fetchService.useFetch(c,{method:"get"},(function(e){var a=Math.ceil(e.itemsCount/t);s.setState({data:e,pagesCount:a,showSpinner:!1})}),(function(e){console.log(e,e.name)}))}},{key:"componentDidMount",value:function(){var e=this.props.match.params.folder,a=this.state,t=a.skip,n=a.take,r=a.searchText,s=a.newestFirst;this.fetchData(e,t,n,r,s)}},{key:"componentDidUpdate",value:function(e){if(this.props.match.params.folder!==e.match.params.folder){this.setState({currentPage:1});var a=this.props.match.params.folder,t=this.state,n=t.take,r=t.searchText,s=t.newestFirst;this.fetchData(a,0,n,r,s)}}},{key:"componentWillUnmount",value:function(){this.fetchService.abortFetch()}},{key:"renderEmailsTable",value:function(){var e=this;if(null!==this.state.data){var a=this.state.data.items,t=this.props.match.params.folder;return 0===a.length?"This list is empty":a.map((function(a){return r.a.createElement("div",{className:"emails-table-row",key:a.id},r.a.createElement(m.c,{to:"/email/".concat(t,"/viewemail/").concat(a.id)},r.a.createElement("div",{className:"emails-table emails-table-from"},r.a.createElement("div",{className:"emails-table-cell"},r.a.createElement("p",null,["outbox","draft"].includes(t)?a.to.map((function(e){return"".concat(e.address," ")})):a.from.address))),r.a.createElement("div",{className:"emails-table emails-table-title"},r.a.createElement("div",{className:"emails-table-cell"},a.title)),r.a.createElement("div",{className:"emails-table emails-table-content"},r.a.createElement("div",{className:"emails-table-cell"},G()(a.content))),r.a.createElement("div",{className:"emails-table emails-table-date"},r.a.createElement("div",{className:"emails-table-cell"},function(e){var a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=new Date,n=e.getMinutes(),r=e.getHours(),s=e.getDate(),c=a[e.getMonth()],l=e.getFullYear(),i=null;return t.getDate()===s&&a[t.getMonth()]===c&&t.getFullYear()===l?i="".concat(r,":").concat(n.toString().padStart(2,"0")):t.getFullYear()===l?i="".concat(s," ").concat(c):t.getFullYear()!==l&&(i="".concat(s,"/").concat(c,"/").concat(l)),i}(new Date(a.date))))),r.a.createElement("div",{className:"emails-table-item emails-table-tools"},r.a.createElement("div",{className:"emails-table-cell"},r.a.createElement(Y,{data:a,handleDeletingOrMovingEmail:e.handleDeletingOrMovingEmail,currentFolder:t}))))}))}}},{key:"render",value:function(){var e=this.state,a=e.pagesCount,t=e.currentPage,n=this.props.match.params.folder;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tools-container"},r.a.createElement("div",{className:"search"},r.a.createElement(R,{handleSearch:this.handleSearch})),r.a.createElement("div",{className:"pager"},r.a.createElement(H,{pagesCount:a,currentPage:t,handlePageChange:this.handlePageChange}))),r.a.createElement("div",{className:"emails-table-header"},r.a.createElement("div",{className:"emails-table-header-item emails-table-header-from"},["outbox","draft"].includes(n)?"To":"From"),r.a.createElement("div",{className:"emails-table-header-item emails-table-header-title"},"Title"),r.a.createElement("div",{className:"emails-table-header-item emails-table-header-content"},"Content"),r.a.createElement("div",{className:"emails-table-header-item emails-table-header-date"},"Date",r.a.createElement(V,{handleDateSorting:this.handleDateSorting}))),r.a.createElement("div",{className:"emails-table-container"},this.renderEmailsTable(),this.state.showSpinner&&r.a.createElement(J,null)))}}]),t}(n.Component)),_=t(69),Q=(t(106),t(107),function(e){return r.a.createElement("span",{className:"form-input-error-msg"},e.errMsg)}),$=function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleValidation=function(){var e=!1,a=!1,t=!1,r=!1,s=!1,c=!1;return-1!==n.state.address.indexOf("@")&&(e=!0),""!==n.state.addressCC&&-1===n.state.addressCC.indexOf("@")||(a=!0),""!==n.state.addressBCC&&-1===n.state.addressBCC.indexOf("@")||(t=!0),n.state.subject.length>0&&(r=!0),n.state.content.length>0&&(s=!0),e&&a&&t&&r&&s&&(c=!0),{address:e,addressCC:a,addressBCC:t,subject:r,content:s,correct:c}},n.handleChange=function(e){var a=e.target.name,t=e.target.value;n.setState(Object(p.a)({},a,t)),n.setState({errors:{address:!1,addressCC:!1,addressBCC:!1,subject:!1,content:!1}})},n.handleEditorChange=function(e){n.setState({content:e})},n.createJSON=function(){var e=n.state,a=e.address,t=e.addressCC,r=e.addressBCC,s={title:e.subject,content:e.content,from:"sender@catmail.test.com.pl",to:a.split(", "),cc:t.split(", "),bcc:r.split(", ")};return JSON.stringify(s)},n.handleSend=function(e){e.preventDefault();var a=n.handleValidation();if(a.correct){n.setState({errors:{address:!1,addressCC:!1,addressBCC:!1,subject:!1,content:!1}});var t={method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:n.createJSON()};n.fetchService.useFetch("/api/emails/send",t,(function(){n.setState({redirectToInbox:!0}),Object(K.c)("Email sent")}),(function(e){console.log("Request failed",e),K.c.error("Failed to send email")}))}else n.setState({errors:{address:!a.address,addressCC:!a.addressCC,addressBCC:!a.addressBCC,subject:!a.subject,content:!a.content}})},n.handleSaveAsDraft=function(e){e.preventDefault();var a={method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:n.createJSON()};n.fetchService.useFetch("/api/emails/draft",a,(function(){n.setState({redirectToDrafts:!0}),Object(K.c)("Saved as draft")}),(function(e){console.log("Request failed",e),K.c.error("Failed to save as draft")}))},n.state={address:"",addressCC:"",addressBCC:"",subject:"",content:"",errors:{address:!1,addressCC:!1,addressBCC:!1,subject:!1,content:!1},redirectToDrafts:!1,redirectToInbox:!1},n.validationErrorMessages={addressIncorrect:"Enter a valid e-mail address",subjectIncorrect:"Subject is required",contentIncorrect:"Content is required"},n.fetchService=new q,n}return Object(i.a)(t,[{key:"componentDidMount",value:function(){var e,a=this,t=new URLSearchParams(this.props.location.search).get("id"),n=new URLSearchParams(this.props.location.search).get("responsetype"),r=new URLSearchParams(this.props.location.search).get("address"),s="/api/emails/".concat(t);t&&this.fetchService.useFetch(s,{method:"get"},(function(t){var r;e={subject:(r=t).title,subjectRE:"RE: ".concat(r.title),subjectFWD:"FWD: ".concat(r.title),address:r.from.address,addressTO:r.to.map((function(e){return e.address})).join(", "),addressCC:r.cc.map((function(e){return e.address})).join(", "),addressBCC:r.bcc.map((function(e){return e.address})).join(", "),content:r.content,contentQuotation:"<br><br>\n              <hr>\n              From: ".concat(r.from.address,"<br>\n              CC: ").concat(r.cc.map((function(e){return e.address})).join(", "),"<br>\n              Received: ").concat(new Date(r.date).toLocaleString(),"<br><br>\n              ").concat(r.content)},a.setState(function(e,a){var t=a.subject,n=a.subjectRE,r=a.subjectFWD,s=a.address,c=a.addressTO,l=a.addressCC,i=a.addressBCC,o=a.content,d=a.contentQuotation;return"reply"===e?{address:s,subject:n,content:d}:"replyall"===e?{address:s,addressCC:c+", "+l,subject:n,content:d}:"forward"===e?{subject:r,content:d}:"edit"===e?{address:c,addressCC:l,addressBCC:i,subject:t,content:o}:void 0}(n,e))}),(function(e){console.log(e)})),r&&this.setState({address:r})}},{key:"componentWillUnmount",value:function(){this.fetchService.abortFetch()}},{key:"render",value:function(){if(this.state.redirectToDrafts)return r.a.createElement(B.b,{to:"/email/draft"});if(this.state.redirectToInbox)return r.a.createElement(B.b,{to:"/email/inbox"});var e=this.validationErrorMessages,a=e.addressIncorrect,t=e.subjectIncorrect,n=e.contentIncorrect;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"email-compose-container"},r.a.createElement("form",{className:"email-compose-form"},r.a.createElement("div",{className:"email-compose-form-header"},r.a.createElement("input",{type:"text",name:"address",placeholder:"To",autoComplete:"false",onChange:this.handleChange,value:this.state.address}),this.state.errors.address&&r.a.createElement(Q,{errMsg:a}),r.a.createElement("input",{type:"text",name:"addressCC",placeholder:"CC",autoComplete:"false2",onChange:this.handleChange,value:this.state.addressCC}),this.state.errors.addressCC&&r.a.createElement(Q,{errMsg:a}),r.a.createElement("input",{type:"text",name:"addressBCC",placeholder:"BCC",autoComplete:"false3",onChange:this.handleChange,value:this.state.addressBCC}),this.state.errors.addressBCC&&r.a.createElement(Q,{errMsg:a}),r.a.createElement("input",{type:"text",name:"subject",placeholder:"Subject",autoComplete:"false4",onChange:this.handleChange,value:this.state.subject}),this.state.errors.subject&&r.a.createElement(Q,{errMsg:t})),r.a.createElement("div",{className:"email-compose-form-content"},r.a.createElement(_.a,{apiKey:"bjuvt5iln6j3ymf2uwsfx02kslovxyhomp0nnkbgm47yvtbl",init:{plugins:"link table"},onEditorChange:this.handleEditorChange,textareaName:"content",className:"email-compose-form-editor",value:this.state.content}),this.state.errors.content&&r.a.createElement(Q,{errMsg:n})),r.a.createElement("div",{className:"email-compose-form-buttons"},r.a.createElement(M,{type:"button",buttonStyle:"primary",handleClick:this.handleSend,text:"Send"}),r.a.createElement(M,{type:"button",buttonStyle:"secondary",handleClick:this.handleSaveAsDraft,text:"Save as draft"}),r.a.createElement(B.a,{when:!0,message:"Are you sure you want to cancel?"}),r.a.createElement(m.b,{to:"/email/inbox"},r.a.createElement(M,{type:"button",buttonStyle:"secondary",text:"Cancel"}))))))}}]),t}(n.Component),X=(t(108),function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleDeletingOrMovingEmail=function(){var e=n.props.match.params.folder;n.setState({redirectToFolder:e})},n.state={data:null,redirectToFolder:!1},n.fetchService=new q,n}return Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.props.match.params.id,t="/api/emails/".concat(a);this.fetchService.useFetch(t,{method:"get"},(function(a){e.setState({data:a})}),(function(e){console.log(e)}))}},{key:"componentWillUnmount",value:function(){this.fetchService.abortFetch()}},{key:"renderEmailContent",value:function(){var e=this.state.data;if(null!==e){var a=this.props.match.params.folder;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"email-view-container"},r.a.createElement(Y,{data:e,handleDeletingOrMovingEmail:this.handleDeletingOrMovingEmail,currentFolder:a}),r.a.createElement("h1",{className:"email-view-title"},e.title),r.a.createElement("header",{className:"email-view-header"},r.a.createElement("div",{className:"email-view-header-from"},"From: ",e.from.address),r.a.createElement("div",{className:"email-view-header-to"},"To: ",e.to.map((function(e){return e.address}))),r.a.createElement("div",{className:"email-view-header-toCC"},"CC: ",e.cc.map((function(e){return e.address})).join(", ")),r.a.createElement("div",{className:"email-view-header-date"},"Date: ",new Date(e.date).toLocaleString())),r.a.createElement("main",{className:"email-view-main-container"},r.a.createElement("div",{className:"email-view-main"},G()(e.content)))))}}},{key:"render",value:function(){return this.state.redirectToFolder?r.a.createElement(B.b,{to:"/email/".concat(this.state.redirectToFolder)}):r.a.createElement(r.a.Fragment,null,this.renderEmailContent())}}]),t}(n.Component)),ee=(t(109),function(){return r.a.createElement("div",{className:"error-page"},r.a.createElement("i",{className:"fas fa-exclamation-triangle"}),r.a.createElement("p",{className:"error-page-notification"},"This page does not exist."))}),ae=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.e,null,r.a.createElement(B.c,{path:"/email/:folder",exact:!0,component:Z}),r.a.createElement(B.c,{path:"/email/:folder/viewemail/:id",exact:!0,component:X}),r.a.createElement(B.c,{path:"/email/compose/new",component:$}),r.a.createElement(B.c,{component:ee})))},te=(t(23),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"navigation"}," ",r.a.createElement(U,null)," "),r.a.createElement("div",{className:"page"}," ",r.a.createElement(ae,null)))}),ne=t(66),re=t.n(ne),se=(t(141),t(67)),ce=function(){function e(a){Object(l.a)(this,e),this.validationConfigs=a}return Object(i.a)(e,[{key:"validate",value:function(e){var a=this,t=!0,n={},r=function(r){if(e.hasOwnProperty(r)){var s=a.validationConfigs.find((function(e){return e.fieldName===r}));if(s){var c,l=Object(se.a)(s.validationFunctionList);try{for(l.s();!(c=l.n()).done;){var i=(0,c.value)(e,r);if(void 0!==i&&null!==i&&""!==i){t=!1,n[r]=i;break}}}catch(o){l.e(o)}finally{l.f()}}}};for(var s in e)r(s);return new ie(t,n)}}]),e}(),le=function e(a,t){Object(l.a)(this,e),this.fieldName=a,this.validationFunctionList=t},ie=function(){function e(a,t){Object(l.a)(this,e),this.isValid=a,this.errorMessages=t}return Object(i.a)(e,[{key:"getErrorMessage",value:function(e){return this.errorMessages[e]}}]),e}();function oe(e,a){if(void 0===e[a]||null===e[a]||""===e[a])return"".concat(a," is required")}function de(e){return function(a,t){return function(e,a,t){if(e[a].length>t)return"maximum length: ".concat(t," characters")}(a,t,e)}}var me=t(68),ue=t.n(me),he=function(e){var a=document.querySelector(e),t=60*(new Date).getHours()-70;a.scrollTop=t},pe={0:7,1:1,2:2,3:3,4:4,5:5,6:6},fe=function(e,a,t){for(var n=[],s=0;s<e;s++)n.push(r.a.createElement("div",{key:s,className:a},t?"".concat(s+1,":00"):null));return n},ve=function(e){var a=e.getDay(),t=new Date(e);return t.setDate(e.getDate()-pe[a]+1),t},ge=function(e){var a=new Date(e);(a=ve(a)).setHours(0,0,0,0),a=a.toISOString();var t=new Date(e);return(t=function(e){var a=e.getDay(),t=new Date(e);return t.setDate(e.getDate()+(7-pe[a])),t}(t)).setHours(23,59,59,999),[a,t=t.toISOString()]},Ee=function(){for(var e=[],a=0;a<24;a++){var t=null,n=null;a<10?(t="0".concat(a,":00"),n="0".concat(a,":30")):(t="".concat(a,":00"),n="".concat(a,":30")),e.push(t,n)}return e.push("23:59"),e.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))},be=function(e,a){var t=new Date(e),n=a.split(":");return t.setHours(n[0],n[1],0,0),t.toISOString(),t},ke=function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleChange=function(e){var a,t=e.target.value,r=e.target.name;n.setState((a={},Object(p.a)(a,r,t),Object(p.a)(a,"validationResult",null),a))},n.handleDatePickerChange=function(e){n.setState({date:e})},n.handleSave=function(e){e.preventDefault();var a,t=n.state,r=t.id,s=t.title,c=t.date,l=t.start,i=t.end,o=t.description,d=be(c,l),m=be(c,i),u=JSON.stringify({dateTimeStart:d,dateTimeEnd:m,title:s,notes:o}),h=[new le("title",[oe,de(20)]),new le("date",[oe]),new le("start",[oe]),new le("end",[oe,(a=l,function(e,t){return function(e,a,t){if(e[a]<t)return"invalid time range"}(e,t,a)})])],p=new ce(h).validate(n.state);if(n.setState({validationResult:p}),p.isValid){var f=r?"/api/calendar/".concat(r):"/api/calendar",v={method:r?"put":"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:u};n.fetchService.useFetch(f,v,(function(){n.props.handleCancelBtn(),void 0!==n.props.task&&n.props.handleUpdateData(),void 0!==n.props.performCalendarTaskListUpdateHandler&&n.props.performCalendarTaskListUpdateHandler()}),(function(e){console.log(e.name)}))}},n.componentDidMount=function(){if(void 0!==n.props.task){var e=new Date(n.props.task.dateTimeStart).toLocaleTimeString().slice(0,5),a=new Date(n.props.task.dateTimeEnd).toLocaleTimeString().slice(0,5);n.setState({id:n.props.task.id,title:n.props.task.title,date:new Date(n.props.task.dateTimeStart),start:e,end:a,description:n.props.task.notes})}else n.setState({date:new Date(n.props.selectedDate)})},n.state={id:null,title:"",date:new Date,start:"12:00",end:"12:30",description:"",validationResult:null},n.fetchService=new q,n}return Object(i.a)(t,[{key:"getValidationError",value:function(e){if(this.state.validationResult)return this.state.validationResult.getErrorMessage(e)}},{key:"render",value:function(){var e=this.getValidationError("title"),a=this.getValidationError("date"),t=this.getValidationError("start"),n=this.getValidationError("end");return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"calendar-newtask-page-container",onClick:this.props.handleCancelBtn}),r.a.createElement("div",{className:"calendar-newtask-container"},r.a.createElement("div",{className:"calendar-newtask-form"},e&&r.a.createElement(Q,{errMsg:e}),r.a.createElement("div",{className:"calendar-newtask-form-input-container"},r.a.createElement("input",{type:"text",className:"calendar-newtask-form-input calendar-newtask-form-input-title",name:"title",placeholder:"Add title",value:this.state.title,onChange:this.handleChange})),r.a.createElement("p",{className:"calendar-newtask-error-messages-container"},a&&r.a.createElement(Q,{errMsg:a}),t&&r.a.createElement(Q,{errMsg:t}),n&&r.a.createElement(Q,{errMsg:n})),r.a.createElement("div",{className:"calendar-newtask-form-input-container"},r.a.createElement("i",{className:"far fa-calendar-alt"}),r.a.createElement(ue.a,{onChange:this.handleDatePickerChange,value:this.state.date}),r.a.createElement("i",{className:"far fa-clock"}),r.a.createElement("select",{className:"calendar-newtask-form-input",name:"start",value:this.state.start,onChange:this.handleChange},Ee()),r.a.createElement("i",{className:"fas fa-minus"}),r.a.createElement("select",{className:"calendar-newtask-form-input",name:"end",value:this.state.end,onChange:this.handleChange},Ee())),r.a.createElement("div",{className:"calendar-newtask-form-input-container"},r.a.createElement("textarea",{className:"calendar-newtask-form-input calendar-newtask-form-input-desc",name:"description",placeholder:"Notes...",value:this.state.description,onChange:this.handleChange})),r.a.createElement("div",{className:"calendar-newtask-form-buttons"},r.a.createElement(M,{type:"button",buttonStyle:"primary",handleClick:this.handleSave,text:"Save"}),r.a.createElement(M,{type:"button",buttonStyle:"secondary",handleClick:this.props.handleCancelBtn,text:"Cancel"})))))}}]),t}(n.Component),Ce=(t(155),function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).onSelectHandler=function(e){n.setState({selectedDate:e}),n.props.onSelectHandler(e)},n.handleAddTask=function(){n.setState({addTaskActive:!0})},n.handleCancelBtn=function(){n.setState({addTaskActive:!1})},n.state={selectedDate:new Date,addTaskActive:!1},n}return Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(re.a,{selected:this.state.selectedDate,onSelect:this.onSelectHandler,mode:"single"}),r.a.createElement("nav",{className:"nav-container"},r.a.createElement("ul",{className:"nav"},r.a.createElement("div",{className:"nav-item-btn-calendar"},r.a.createElement("button",{onClick:this.handleAddTask},r.a.createElement("i",{className:"fas fa-plus"}),"Add task")))),this.state.addTaskActive?r.a.createElement(ke,{handleCancelBtn:this.handleCancelBtn,selectedDate:this.state.selectedDate,performCalendarTaskListUpdateHandler:this.props.performCalendarTaskListUpdateHandler}):null)}}]),t}(n.Component)),ye=t(28),Ne=(t(156),function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).state={editTaskActive:!1},e.handleEditButton=function(){e.setState({editTaskActive:!0})},e.handleDeleteButton=function(){e.fetchData(e.props.task.id)},e.handleCancelBtn=function(){e.setState({editTaskActive:!1})},e}return Object(i.a)(t,[{key:"fetchData",value:function(e){var a=this,t="https://catmail.azurewebsites.net/api/calendar/".concat(e);fetch(t,{method:"delete",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((function(e){e.ok&&a.props.handleUpdateData()})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"taskHoverButtons-container"},r.a.createElement("button",{className:"taskHoverButtons-button",title:"Edit",onClick:this.handleEditButton},r.a.createElement("i",{className:"far fa-edit"})),r.a.createElement("button",{className:"taskHoverButtons-button",title:"Delete",onClick:this.handleDeleteButton},r.a.createElement("i",{className:"far fa-trash-alt"}))),this.state.editTaskActive?r.a.createElement(ke,{handleCancelBtn:this.handleCancelBtn,handleUpdateData:this.props.handleUpdateData,task:this.props.task}):null)}}]),t}(n.Component)),Se=(t(157),function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleUpdateData=function(){var e,a=function(e){var a=new Date(e);a.setHours(0,0,0,0),a=a.toISOString();var t=new Date(e);return t.setHours(23,59,59,999),[a,t=t.toISOString()]}(n.props.selectedDate);(e=n).fetchData.apply(e,Object(ye.a)(a))},n.renderTasks=function(){if(null!==n.state.data)return n.state.data.map((function(e){var a=new Date(e.dateTimeStart),t=new Date(e.dateTimeEnd),s={top:"".concat(60*a.getHours()+a.getMinutes(),"px"),height:"".concat((t-a)/6e4,"px")};return r.a.createElement("div",{key:e.id,className:"calendar-tasklist-day-task",style:s},r.a.createElement("div",{className:"calendar-tasklist-day-task-content-container"},r.a.createElement("div",{className:"calendar-tasklist-day-title-container"},r.a.createElement("h1",{className:"calendar-tasklist-day-task-title"},e.title),r.a.createElement("p",{className:"calendar-tasklist-day-task-date"},a.toLocaleTimeString().slice(0,5)," - ",t.toLocaleTimeString().slice(0,5))),r.a.createElement("p",{className:"calendar-tasklist-day-task-description"},e.notes)),r.a.createElement(Ne,{task:e,handleUpdateData:n.handleUpdateData}))}))},n.state={data:null},n.fetchService=new q,n}return Object(i.a)(t,[{key:"fetchData",value:function(e,a){var t=this,n="/api/calendar?from=".concat(e,"&to=").concat(a);this.fetchService.useFetch(n,{method:"get"},(function(e){t.setState({data:e})}),(function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){this.handleUpdateData(),he(".calendar-tasklist-day-container")}},{key:"componentWillUnmount",value:function(){this.fetchService.abortFetch()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"calendar-tasklist-day-title"},["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][this.props.selectedDate.getDay()],", ",this.props.selectedDate.toLocaleDateString()),r.a.createElement("div",{className:"calendar-tasklist-day-container"},r.a.createElement("div",{className:"calendar-tasklist-day-clock"},r.a.createElement("div",{className:"calendar-tasklist-day-clock-item calendar-tasklist-item-first"}),fe(23,"calendar-tasklist-day-clock-item",!0)),r.a.createElement("div",{className:"calendar-tasklist-day-table"},r.a.createElement("div",{className:"calendar-tasklist-day-table-item calendar-tasklist-item-first"}),fe(23,"calendar-tasklist-day-table-item",!1),this.renderTasks())))}}]),t}(n.Component)),we=(t(158),function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleUpdateData=function(){var e,a=ge(n.props.selectedDate);(e=n).fetchData.apply(e,Object(ye.a)(a))},n.renderTasks=function(){if(null!==n.state.data)return n.state.data.map((function(e){var a=new Date(e.dateTimeStart),t=new Date(e.dateTimeEnd),s={top:"".concat(60*a.getHours()+a.getMinutes(),"px"),left:"".concat((pe[a.getDay()]-1)*(100/7),"%"),height:"".concat((t-a)/6e4,"px")};return r.a.createElement("div",{key:e.id,className:"calendar-tasklist-week-task",style:s},r.a.createElement("div",{className:"calendar-tasklist-week-task-content-container"},r.a.createElement("div",{className:"calendar-tasklist-week-title-container"},r.a.createElement("h1",{className:"calendar-tasklist-week-task-title"},e.title),r.a.createElement("p",{className:"calendar-tasklist-week-task-date"},a.toLocaleTimeString().slice(0,5)," - ",t.toLocaleTimeString().slice(0,5))),r.a.createElement("p",{className:"calendar-tasklist-week-task-description"},e.notes)),r.a.createElement(Ne,{task:e,handleUpdateData:n.handleUpdateData}))}))},n.state={data:null},n.fetchService=new q,n}return Object(i.a)(t,[{key:"fetchData",value:function(e,a){var t=this,n="/api/calendar?from=".concat(e,"&to=").concat(a);this.fetchService.useFetch(n,{method:"get"},(function(e){t.setState({data:e})}),(function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){this.handleUpdateData(),he(".calendar-tasklist-week-container")}},{key:"componentWillUnmount",value:function(){this.fetchService.abortFetch()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"calendar-tasklist-week-title"},function(e,a,t){for(var n=[],s=new Date(ve(t)),c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],l=0;l<e;l++){var i=new Date(new Date(s).setDate(s.getDate()+l)),o=i.getDate(),d=c[i.getMonth()];n.push(r.a.createElement("div",{key:l,className:a},o," ",d.toUpperCase()))}return n}(7,"calendar-tasklist-week-title-item",this.props.selectedDate)),r.a.createElement("div",{className:"calendar-tasklist-week-container"},r.a.createElement("div",{className:"calendar-tasklist-week-clock"},r.a.createElement("div",{className:"calendar-tasklist-week-clock-item calendar-tasklist-item-first"}),fe(23,"calendar-tasklist-week-clock-item",!0)),r.a.createElement("div",{className:"calendar-tasklist-week-table"},r.a.createElement("div",{className:"calendar-tasklist-week-table-item calendar-tasklist-item-first"}),fe(23,"calendar-tasklist-week-table-item",!1),r.a.createElement("div",{className:"calendar-tasklist-week-days-container"},fe(7,"calendar-tasklist-week-days-item",!1),this.renderTasks()))))}}]),t}(n.Component)),Fe=(t(159),function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).selectedViewHandler=function(e){n.setState({selectedView:e})},n.renderView=function(){return"day"===n.state.selectedView?r.a.createElement(Se,{selectedDate:n.props.selectedDate}):r.a.createElement(we,{selectedDate:n.props.selectedDate})},n.state={selectedView:"day"},n}return Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"calendar-tasklist-tools-container"},r.a.createElement("div",{className:"calendar-tasklist-buttons"},r.a.createElement("button",{className:"day"===this.state.selectedView?"calendar-tasklist-btn active":"calendar-tasklist-btn",title:"Switch to day view",onClick:function(){return e.selectedViewHandler("day")}},"Day"),r.a.createElement("button",{className:"week"===this.state.selectedView?"calendar-tasklist-btn active":"calendar-tasklist-btn",title:"Switch to week view",onClick:function(){return e.selectedViewHandler("week")}},"Week"))),r.a.createElement("div",{className:"calendar-tasklist-container"},this.renderView()))}}]),t}(n.Component)),je=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.e,null,r.a.createElement(B.c,{path:"/calendar",exact:!0,component:function(){return r.a.createElement(Fe,{selectedDate:e.selectedDate})}}),r.a.createElement(B.c,{component:ee})))},De=function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).onSelectHandler=function(e){n.setState({selectedDate:e})},n.performCalendarTaskListUpdateHandler=function(){n.setState((function(e){return{performCalendarTaskListUpdate:!e.performCalendarTaskListUpdate}}))},n.state={selectedDate:new Date,performCalendarTaskListUpdate:!1},n}return Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"navigation"},r.a.createElement(Ce,{onSelectHandler:this.onSelectHandler,performCalendarTaskListUpdateHandler:this.performCalendarTaskListUpdateHandler})),r.a.createElement("div",{className:"page"},r.a.createElement(je,{selectedDate:this.state.selectedDate})))}}]),t}(n.Component),Oe=[{name:"All contacts",path:"/addressbook/all",icon:"far fa-address-book"},{name:"Favourite",path:"/addressbook/favourite",icon:"far fa-heart"},{name:"Personal",path:"/addressbook/personal",icon:"fas fa-users"},{name:"Work",path:"/addressbook/work",icon:"fas fa-briefcase"},{name:"School",path:"/addressbook/school",icon:"fas fa-user-graduate"}],Te=function(){var e=Oe.map((function(e){return r.a.createElement("li",{className:"nav-item",key:e.name,title:e.name},r.a.createElement(m.c,{to:e.path,exact:!!e.exact&&e.exact},r.a.createElement("i",{className:e.icon}),e.name))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"nav-container"},r.a.createElement("ul",{className:"nav"},r.a.createElement("li",{className:"nav-item-btn"},r.a.createElement(m.c,{to:"/addressbook/add/new",exact:!0},r.a.createElement("i",{className:"fas fa-plus"}),"Add")),e)))},xe=(t(160),function(e){var a=e.id,t=e.email,n=e.handleDeletingContact,s=new q;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"addressbook-list-tools-container"},r.a.createElement(m.b,{to:"/email/compose/new?address=".concat(t),className:"addressbook-list-tools",title:"Compose e-mail"},r.a.createElement("i",{className:"far fa-envelope"})),r.a.createElement(m.b,{to:"/addressbook/add/new?id=".concat(a),className:"addressbook-list-tools",title:"Edit"},r.a.createElement("i",{className:"far fa-edit"})),r.a.createElement("div",{className:"addressbook-list-tools",title:"Delete",onClick:function(){var e="/api/Contact/".concat(a);s.useFetch(e,{method:"delete"},(function(){n(),Object(K.c)("Contact deleted")}),(function(e){console.log(e,e.name),K.c.error("Failed to delete contact")}))}},r.a.createElement("i",{className:"far fa-trash-alt"}))))}),Ae=(t(161),function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).renderSpinner=function(){n.setState({showSpinner:!0})},n.handleFavourites=function(e,a){var t="/api/Contact/".concat(e,"/favourite");n.fetchService.useFetch(t,{method:"put"},(function(e){var t=JSON.parse(JSON.stringify(n.state.data));t.items[a].isFavourite=e,n.setState({data:t})}),(function(e){console.log(e,e.name)}))},n.handleSearch=function(e){n.setState({searchText:e});var a=n.state,t=a.skip,r=a.take,s=n.props.match.params.category;n.fetchData(e,s,t,r)},n.handlePageChange=function(e){var a=n.state,t=a.take,r=a.currentPage,s=a.pagesCount,c=a.searchText;if(r+e>=1&&r+e<=s){var l=r+e,i=(l-1)*t;n.setState({currentPage:l,skip:i});var o=n.props.match.params.category;n.fetchData(c,o,i,t)}},n.handleDeletingContact=function(){1===n.state.data.items.length&&n.state.pagesCount>1&&n.setState((function(e){return{currentPage:e.currentPage-1}}));var e=n.props.match.params.category,a=n.state,t=a.searchText,r=a.currentPage,s=a.take,c=(r-1)*s;n.fetchData(t,e,c,s)},n.state={showSpinner:!0,data:null,skip:0,take:20,currentPage:1,pagesCount:null,searchText:""},n.fetchService=new q,n}return Object(i.a)(t,[{key:"fetchData",value:function(e,a,t,n){var r=this;this.renderSpinner();var s="/api/Contact?searchText=".concat(e,"&category=").concat(a,"&skip=").concat(t,"&take=").concat(n);this.fetchService.useFetch(s,{method:"get"},(function(e){var a=Math.ceil(e.itemsCount/n);r.setState({data:e,pagesCount:a,showSpinner:!1})}),(function(e){console.log("Fetch failure callback in component AddressbookList"),console.log(e,e.name)}))}},{key:"componentDidMount",value:function(){var e=this.state,a=e.searchText,t=e.skip,n=e.take,r=this.props.match.params.category;this.fetchData(a,r,t,n)}},{key:"componentDidUpdate",value:function(e){if(this.props.match.params.category!==e.match.params.category){this.setState({currentPage:1});var a=this.props.match.params.category,t=this.state,n=t.searchText,r=t.skip,s=t.take;this.fetchData(n,a,r,s)}}},{key:"componentWillUnmount",value:function(){this.fetchService.abortFetch()}},{key:"renderTable",value:function(){var e=this;if(null!==this.state.data){var a=this.props.match.params.category,t=this.state.data.items;return 0===t.length?"This list is empty":t.map((function(t,n){return r.a.createElement("div",{className:"addressbook-table-row",key:t.id},r.a.createElement("div",{className:"addressbook-table-item addressbook-table-avatar"},r.a.createElement("div",{className:"addressbook-table-cell"},t.avatar?r.a.createElement("img",{src:"".concat(W,"/api/Avatar/").concat(t.avatar),alt:"Contact avatar"}):r.a.createElement("i",{className:"fas fa-camera"}))),r.a.createElement("div",{className:"addressbook-table-item addressbook-table-favourite"},r.a.createElement("div",{className:"addressbook-table-cell"},r.a.createElement("i",{title:t.isFavourite?"Remove from favourites":"Add to favourites",className:t.isFavourite?"far fa-heart favourite":"far fa-heart",onClick:function(){return e.handleFavourites(t.id,n)}}))),r.a.createElement(m.c,{to:"/addressbook/".concat(a,"/contactview/").concat(t.id)},r.a.createElement("div",{className:"addressbook-table-item addressbook-table-name"},r.a.createElement("div",{className:"addressbook-table-cell"},t.name)),r.a.createElement("div",{className:"addressbook-table-item addressbook-table-email"},r.a.createElement("div",{className:"addressbook-table-cell"},t.email)),r.a.createElement("div",{className:"addressbook-table-item addressbook-table-phone"},r.a.createElement("div",{className:"addressbook-table-cell"},t.phone))),r.a.createElement("div",{className:"addressbook-table-item addressbook-table-tools"},r.a.createElement("div",{className:"addressbook-table-cell"},r.a.createElement(xe,{id:t.id,email:t.email,handleDeletingContact:e.handleDeletingContact}))))}))}}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tools-container"},r.a.createElement("div",{className:"search"},r.a.createElement(R,{handleSearch:this.handleSearch})),r.a.createElement("div",{className:"pager"},r.a.createElement(H,{pagesCount:this.state.pagesCount,currentPage:this.state.currentPage,handlePageChange:this.handlePageChange}))),r.a.createElement("div",{className:"addressbook-table-container"},r.a.createElement("div",{className:"addressbook-table-header"},r.a.createElement("div",{className:"addressbook-table-header-item addressbook-table-header-name"},"Name"),r.a.createElement("div",{className:"addressbook-table-header-item addressbook-table-header-email"},"E-mail"),r.a.createElement("div",{className:"addressbook-table-header-item addressbook-table-header-phone"},"Phone")),r.a.createElement("div",{className:"addressbook-table-inner-container"},this.renderTable(),this.state.showSpinner&&r.a.createElement(J,null))))}}]),t}(n.Component)),Me=(t(162),function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=a.call.apply(a,[this].concat(r))).state={},e}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=encodeURI("https://maps.google.com/maps?width=100%&height=600&hl=en&q=".concat(this.props.address,", ").concat(this.props.city,", ").concat(this.props.country,"&ie=UTF8&t=&amp;z=14&iwloc=B&output=embed"));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"addressbook-map-page-container",onClick:function(a){return e.props.handleClick(a,"mapActive")}}),r.a.createElement("div",{className:"addressbook-map-container"},r.a.createElement("div",{className:"addressbook-map-close"},r.a.createElement("i",{className:"far fa-times-circle",title:"Close",onClick:function(a){return e.props.handleClick(a,"mapActive")}})),r.a.createElement("iframe",{title:"map",src:a,frameBorder:"0",scrolling:"no",marginHeight:"0",marginWidth:"0"})))}}]),t}(n.Component)),Ie=(t(163),t(164),function(e){var a=["All","Personal","Work","School"];return r.a.createElement("div",{className:"addressbook-add-tools-container"},r.a.createElement("div",{className:"addressbook-add-tools-category-container",title:"Set category"},r.a.createElement("p",null,"Category:"),a.map((function(a){return r.a.createElement("div",{key:a,className:e.category.toLowerCase()===a.toLowerCase()?"addressbook-add-tools-category active":"addressbook-add-tools-category",onClick:function(){return e.setCategory(a)}},a)}))),r.a.createElement("div",{className:"addressbook-add-tools-favourite",title:e.isFavourite?"Remove from favourites":"Add to favourites",onClick:e.toggleIsFavourite},r.a.createElement("i",{className:e.isFavourite?"fa fa-heart active":"far fa-heart"})))}),Pe=["Afghanistan","Albania","Algeria","American Samoa","Andorra","Angola","Anguilla","Antarctica","Antigua and Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia and Herzegowina","Botswana","Bouvet Island","Brazil","British Indian Ocean Territory","Brunei Darussalam","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Cayman Islands","Central African Republic","Chad","Chile","China","Christmas Island","Cocos (Keeling) Islands","Colombia","Comoros","Congo","Congo, the Democratic Republic of the","Cook Islands","Costa Rica","Cote d'Ivoire","Croatia","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","East Timor","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Falkland Islands (Malvinas)","Faroe Islands","Fiji","Finland","France","France Metropolitan","French Guiana","French Polynesia","French Southern Territories","Gabon","Gambia","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guadeloupe","Guam","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Heard and Mc Donald Islands","Holy See (Vatican City State)","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Korea, Democratic People's Republic of","Korea, Republic of","Kuwait","Kyrgyzstan","Lao, People's Democratic Republic","Latvia","Lebanon","Lesotho","Liberia","Libyan Arab Jamahiriya","Liechtenstein","Lithuania","Luxembourg","Macau","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Martinique","Mauritania","Mauritius","Mayotte","Mexico","Micronesia, Federated States of","Moldova, Republic of","Monaco","Mongolia","Montserrat","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","Netherlands Antilles","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Niue","Norfolk Island","Northern Mariana Islands","Norway","Oman","Pakistan","Palau","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Pitcairn","Poland","Portugal","Puerto Rico","Qatar","Reunion","Romania","Russian Federation","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Georgia and the South Sandwich Islands","Spain","Sri Lanka","St. Helena","St. Pierre and Miquelon","Sudan","Suriname","Svalbard and Jan Mayen Islands","Swaziland","Sweden","Switzerland","Syrian Arab Republic","Taiwan","Tajikistan","Tanzania, United Republic of","Thailand","Togo","Tokelau","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Turks and Caicos Islands","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States of America","United States Minor Outlying Islands","Uruguay","Uzbekistan","Vanuatu","Venezuela","Vietnam","Virgin Islands (British)","Virgin Islands (U.S.)","Wallis and Futuna Islands","Western Sahara","Yemen","Yugoslavia","Zambia","Zimbabwe"],Be=function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleChange=function(e){var a,t=e.target.name,r=e.target.value;n.setState((a={},Object(p.a)(a,t,r),Object(p.a)(a,"validationResult",null),a))},n.handleClick=function(e,a){e.preventDefault(),n.setState((function(e){return Object(p.a)({},a,!e[a])}))},n.handleSave=function(e){e.preventDefault();var a=n.state,t=a.id,r=a.name,s=a.email,c=a.phone,l=a.note,i=a.address,o=a.city,d=a.postalCode,m=a.country,u=a.category,h=a.isFavourite,p=a.avatar,f=JSON.stringify({name:r,email:s,phone:c,notes:l,address:{street:i,postCode:d,city:o,country:m},category:u,isFavourite:h,avatar:p}),v=[new le("name",[oe,de(50)]),new le("email",[oe,de(50)])],g=new ce(v).validate(n.state);if(n.setState({validationResult:g}),g.isValid){var E=t?"/api/contact/".concat(t):"/api/contact",b={method:t?"put":"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:f};n.fetchService.useFetch(E,b,(function(){n.setState({redirectToAddressbookList:!0}),Object(K.c)("Contact saved")}),(function(e){console.log("Request failed",e),K.c.error("Failed to save contact")}))}},n.getValidationError=function(e){if(n.state.validationResult)return n.state.validationResult.getErrorMessage(e)},n.toggleIsFavourite=function(){n.setState((function(e){return{isFavourite:!e.isFavourite}}))},n.setCategory=function(e){n.setState({category:e})},n.generateCountrySelectorOptions=function(){return Pe.map((function(e){return r.a.createElement("option",{value:e,key:e},e)}))},n.handleAvatarUpload=function(e){n.setState({showSpinner:!0});var a=new FormData;a.append("file",e.target.files[0],e.target.files[0].name);var t={method:"post",body:a};n.fetchService.useFetch("/api/Avatar",t,(function(e){n.setState({avatar:e.id,showSpinner:!1})}),(function(e){alert("Saving image file failed. Try again"),console.log("Saving image failed. ".concat(e))}))},n.handleAvatarInputReset=function(e){e.target.value=null},n.handleDeleteAvatarImage=function(){n.setState({avatar:null})},n.renderAvatarInput=function(){if(null===n.state.avatar)return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"addressbook-add-avatar",title:"Upload avatar image"},r.a.createElement("input",{type:"file",accept:"image/*",id:"addressbook-add-avatar-input",hidden:!0,onClick:n.handleAvatarInputReset,onChange:n.handleAvatarUpload}),r.a.createElement("label",{htmlFor:"addressbook-add-avatar-input",className:"addressbook-add-avatar-input"}),r.a.createElement("i",{className:"fas fa-camera"}),r.a.createElement("p",null,"Upload image")));var e="".concat(W,"/api/Avatar/").concat(n.state.avatar);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"addressbook-add-avatar",title:"Change avatar image"},r.a.createElement("input",{type:"file",id:"addressbook-add-avatar-input",hidden:!0,onClick:n.handleAvatarInputReset,onChange:n.handleAvatarUpload}),r.a.createElement("label",{htmlFor:"addressbook-add-avatar-input",className:"addressbook-add-avatar-input"}),r.a.createElement("img",{src:e,alt:"avatar",className:"addressbook-add-avatar-image"})),r.a.createElement("div",{className:"addressbook-add-avatar-delete-image",onClick:n.handleDeleteAvatarImage},r.a.createElement("i",{className:"far fa-times-circle"}),"Delete image"))},n.state={id:"",isFavourite:!1,category:"All",avatar:null,name:"",email:"",phone:"",note:"",address:"",city:"",postalCode:"",country:"Poland",mapActive:!1,validationResult:null,showSpinner:!1,redirectToAddressbookList:!1},n.fetchService=new q,n}return Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=new URLSearchParams(this.props.location.search).get("id"),t="/api/Contact/".concat(a);a&&this.fetchService.useFetch(t,{method:"get"},(function(t){e.setState({id:a,isFavourite:t.isFavourite,category:t.category,avatar:t.avatar,name:t.name,email:t.email,phone:t.phone,note:t.notes,address:t.address.street,city:t.address.city,postalCode:t.address.postalCode,country:t.address.country})}),(function(e){console.log(e,e.name)}))}},{key:"render",value:function(){var e=this,a=this.getValidationError("name"),t=this.getValidationError("email");return this.state.redirectToAddressbookList?r.a.createElement(B.b,{to:"/addressbook/all"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"addressbook-add-container"},r.a.createElement("div",{className:"addressbook-add-header"},r.a.createElement(Ie,{isFavourite:this.state.isFavourite,category:this.state.category,toggleIsFavourite:this.toggleIsFavourite,setCategory:this.setCategory})),r.a.createElement("form",{className:"addressbook-add-form"},r.a.createElement("div",{className:"addressbook-add-form-container"},r.a.createElement("div",{className:"addressbook-input-wrapper-avatar"},r.a.createElement("div",{className:"addressbook-input-wrapper-basic"},r.a.createElement("label",{htmlFor:"name",className:"addressbook-add-form-label"},"Contact name:",r.a.createElement("span",null,"*")),r.a.createElement("input",{type:"text",name:"name",maxLength:"50",onChange:this.handleChange,value:this.state.name||""}),a&&r.a.createElement(Q,{errMsg:a}),r.a.createElement("label",{htmlFor:"email",className:"addressbook-add-form-label"},"Email adress:",r.a.createElement("span",null,"*")),r.a.createElement("input",{type:"text",name:"email",maxLength:"50",pattern:"^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5})$",onChange:this.handleChange,value:this.state.email||""}),t&&r.a.createElement(Q,{errMsg:t}),r.a.createElement("label",{htmlFor:"phone",className:"addressbook-add-form-label"},"Phone number:"),r.a.createElement("input",{type:"text",name:"phone",maxLength:"50",onChange:this.handleChange,value:this.state.phone||""})),r.a.createElement("div",{className:"addressbook-add-avatar-container"},this.renderAvatarInput())),r.a.createElement("label",{htmlFor:"note",className:"addressbook-add-form-label"},"Note:"),r.a.createElement("textarea",{name:"note",maxLength:"1000",onChange:this.handleChange,value:this.state.note||""}),r.a.createElement("label",{htmlFor:"address",className:"addressbook-add-form-label"},"Address:"),r.a.createElement("input",{type:"text",name:"address",maxLength:"100",autoComplete:"new",onChange:this.handleChange,value:this.state.address||""}),r.a.createElement("div",{className:"addressbook-input-wrapper-address"},r.a.createElement("label",{htmlFor:"city",className:"addressbook-add-form-label"},"City:"),r.a.createElement("input",{type:"text",name:"city",maxLength:"50",autoComplete:"false",onChange:this.handleChange,value:this.state.city||""})),r.a.createElement("div",{className:"addressbook-input-wrapper-address"},r.a.createElement("label",{htmlFor:"postalcode",className:"addressbook-add-form-label"},"Postal code:"),r.a.createElement("input",{type:"text",name:"postalCode",maxLength:"10",autoComplete:"false1",onChange:this.handleChange,value:this.state.postalCode||""})),r.a.createElement("div",{className:"addressbook-input-wrapper-address"},r.a.createElement("label",{htmlFor:"country",className:"addressbook-add-form-label"},"Country:"),r.a.createElement("select",{name:"country",maxLength:"50",autoComplete:"false2",onChange:this.handleChange,value:this.state.country||""},this.generateCountrySelectorOptions())),r.a.createElement("div",{className:"addressbook-input-wrapper-address"},r.a.createElement("label",{htmlFor:"open-map",className:"addressbook-add-form-label"},"Open map window:"),r.a.createElement(M,{name:"open-map",type:"button",buttonStyle:"secondary",handleClick:function(a){return e.handleClick(a,"mapActive")},text:"See location on GoogleMaps"})),r.a.createElement("div",{className:"addressbook-add-form-buttons"},r.a.createElement(M,{type:"submit",buttonStyle:"primary",handleClick:this.handleSave,text:"Save"}),r.a.createElement(B.a,{when:!0,message:"Are you sure you want to cancel?"}),r.a.createElement(m.b,{to:"/addressbook/all"},r.a.createElement(M,{type:"button",buttonStyle:"secondary",text:"Cancel"})))))),this.state.mapActive?r.a.createElement(Me,{handleClick:this.handleClick,address:this.state.address,city:this.state.city,country:this.state.country}):null,this.state.showSpinner?r.a.createElement(J,null):null)}}]),t}(n.Component),Le=(t(165),function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).handleDeletingContact=function(){var e=n.props.match.params.category;n.setState({redirectToCategory:e})},n.fetchData=function(e){var a="/api/Contact/".concat(e);n.fetchService.useFetch(a,{method:"get"},(function(e){n.setState({data:e,showSpinner:!1})}),(function(e){console.log(e,e.name)}))},n.renderContactContent=function(){if(null!==n.state.data){var e=n.state.data,a=encodeURI("https://maps.google.com/maps?width=100%&height=600&hl=en&q=".concat(e.address.street,", ").concat(e.address.city,", ").concat(e.address.country,"&ie=UTF8&t=&amp;z=14&iwloc=B&output=embed"));return r.a.createElement("div",{className:"addressbook-contact-container"},r.a.createElement("div",{className:"addressbook-contact-tools-container"},r.a.createElement(xe,{id:e.id,email:e.email,handleDeletingContact:n.handleDeletingContact})),r.a.createElement("h1",{className:"addressbook-contact-name"},e.name),r.a.createElement("div",{className:"addressbook-contact-data-container"},r.a.createElement("div",{className:"addressbook-contact-data-item addressbook-contact-data-picture"},r.a.createElement("div",{className:"addressbook-contact-data-picture-container"},e.avatar?r.a.createElement("img",{src:"".concat(W,"/api/Avatar/").concat(e.avatar),alt:"Contact"}):r.a.createElement("i",{className:"fas fa-camera"}))),r.a.createElement("div",{className:"addressbook-contact-data-item addressbook-contact-data-info"},r.a.createElement("div",{className:"addressbook-contact-data-header"},r.a.createElement("p",null,"Contact information")),r.a.createElement("div",{className:"addressbook-contact-data-fieldnames"},r.a.createElement("p",null,"Contact name:"),r.a.createElement("p",null,"Email adress:"),r.a.createElement("p",null,"Phone number:"),r.a.createElement("p",null,"Note:")),r.a.createElement("div",{className:"addressbook-contact-data-fields"},r.a.createElement("p",null,e.name),r.a.createElement("p",null,e.email),r.a.createElement("p",null,e.phone),r.a.createElement("p",{className:"note"},e.notes))),r.a.createElement("div",{className:"addressbook-contact-data-item addressbook-contact-data-address"},r.a.createElement("div",{className:"addressbook-contact-data-header"},r.a.createElement("p",null,"Address information")),r.a.createElement("div",{className:"addressbook-contact-data-fieldnames"},r.a.createElement("p",null,"Address:"),r.a.createElement("p",null,"City:"),r.a.createElement("p",null,"Postal code:"),r.a.createElement("p",null,"Country:")),r.a.createElement("div",{className:"addressbook-contact-data-fields"},r.a.createElement("p",null,e.address.street),r.a.createElement("p",null,e.address.city),r.a.createElement("p",null,e.address.postCode),r.a.createElement("p",null,e.address.country))),r.a.createElement("div",{className:"addressbook-contact-data-item addressbook-contact-data-map"},r.a.createElement("div",{className:"addressbook-contact-data-map-container"},r.a.createElement("iframe",{title:"map",src:a,frameBorder:"0",scrolling:"no",marginHeight:"0",marginWidth:"0"})))))}},n.state={showSpinner:!0,data:null,redirectToCategory:!1},n.fetchService=new q,n}return Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.fetchData(e)}},{key:"componentWillUnmount",value:function(){this.fetchService.abortFetch()}},{key:"render",value:function(){return this.state.redirectToCategory?r.a.createElement(B.b,{to:"/addressbook/".concat(this.state.redirectToCategory)}):r.a.createElement(r.a.Fragment,null,this.renderContactContent(),this.state.showSpinner&&r.a.createElement(J,null))}}]),t}(n.Component)),Ue=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.e,null,r.a.createElement(B.c,{path:"/addressbook/:category",exact:!0,component:Ae}),r.a.createElement(B.c,{path:"/addressbook/add/new",component:Be}),r.a.createElement(B.c,{path:"/addressbook/:category/contactview/:id",component:Le}),r.a.createElement(B.c,{component:ee})))},Re=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"navigation"}," ",r.a.createElement(Te,null)," "),r.a.createElement("div",{className:"page"}," ",r.a.createElement(Ue,null)))},He=(t(166),function(){return r.a.createElement("div",{className:"about-container"},r.a.createElement("div",{className:"about-content-header"},"About this app"),r.a.createElement("div",{className:"about-content-container"},r.a.createElement("p",null,"This app was created as a training exercise to improve programming skills. It is a simplified version of a mailbox, with features listed below."),r.a.createElement("p",{className:"title"},"Features"),r.a.createElement("div",null,r.a.createElement("div",{className:"about-content-features"},r.a.createElement("i",{className:"far fa-envelope-open"}),r.a.createElement("p",null,"Email - displays a list of sample messages, with ability to proceed with basic operations, such as: composing, deleting, editing messages, moving messages between folders. Sending emails is simulated only.")),r.a.createElement("div",{className:"about-content-features"},r.a.createElement("i",{className:"far fa-calendar-alt"}),r.a.createElement("p",null,"Calendar - planner with day and week view, displaying tasks in date / time matrix. Allows to add new, edit and delete existing tasks.")),r.a.createElement("div",{className:"about-content-features"},r.a.createElement("i",{className:"far fa-address-book"}),r.a.createElement("p",null,"Addressbook - displays list of sample contact records, which can be edited, deleted or messaged (by linking to email compose component)."))),r.a.createElement("p",{className:"title"},"Technologies used"),r.a.createElement("p",null,"This is a web SPA developed in React, connected to an external API. All changes are saved in API memory (they are not saved in a database). All data is periodically reset.")))}),Ve=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"content-container"},r.a.createElement(B.e,null,r.a.createElement(B.c,{path:"/",exact:!0,render:function(){return r.a.createElement(B.b,{to:"/email/inbox"})}}),r.a.createElement(B.c,{path:"/email",exact:!0,render:function(){return r.a.createElement(B.b,{to:"/email/inbox"})}}),r.a.createElement(B.c,{path:"/email",component:te}),r.a.createElement(B.c,{path:"/calendar",component:De}),r.a.createElement(B.c,{path:"/addressbook",exact:!0,render:function(){return r.a.createElement(B.b,{to:"/addressbook/all"})}}),r.a.createElement(B.c,{path:"/addressbook",component:Re}),r.a.createElement(B.c,{path:"/about",component:He}),r.a.createElement(B.c,{render:function(){return r.a.createElement(B.b,{to:"/email/inbox"})}}))))},Je=(t(167),function(e){Object(o.a)(t,e);var a=Object(d.a)(t);function t(e){var n;Object(l.a)(this,t),(n=a.call(this,e)).handleBackgroundChange=function(e){n.setState({appTheme:e});var a=JSON.stringify(e);localStorage.setItem("appTheme",a)};var r=JSON.parse(localStorage.getItem("appTheme"));return n.state={appTheme:null!==r&&void 0!==r?r:{backgroundImage:"linear-gradient(120deg, #96adcb 50%, #c2e9fb 100%)"}},n}return Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{basename:"/mailing_app"},r.a.createElement("div",{className:"app",style:this.state.appTheme},r.a.createElement("div",{className:"header"},r.a.createElement(P,{handleBackgroundChange:this.handleBackgroundChange})),r.a.createElement("div",{className:"main-container"},r.a.createElement("div",{className:"menubar"},r.a.createElement(h,null)),r.a.createElement("div",{className:"content"},r.a.createElement(Ve,null))))),r.a.createElement(K.a,{position:"bottom-left",limit:3,autoClose:2500,transition:K.b}))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(n.StrictMode,null,r.a.createElement(Je,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}]),[[70,1,2]]]);
//# sourceMappingURL=main.09c1ae45.chunk.js.map